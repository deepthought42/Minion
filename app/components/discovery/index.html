<div controller="WorkManagementCtrl" class="content">
<!--  <button ng-show="isStarted"
          class="btn btn-danger col-xs-12"
          ng-click="stopMappingProcess('account_key_here')">
      Stop!
  </button>
-->

	<div class="secondary-nav vertical__center__int">
	  <div class="col-md-2 col-sm-4 ">
		<button class="btn btn--green pull-left" ng-click="startMappingProcess()" ng-show="!isStarted">Start Discovery</button>
	  </div>
		<div class="col-md-10 col-sm-8">
	  </div>
	</div>

	<div class="test-labels">
		<div class="col-xs-2">
		  Status
		</div>
		<div class="col-xs-4">
		  Test Title
		</div>
		<div class="col-xs-2">
		  Time (ms)&nbsp;<i class="fa fa-sort"></i>
		</div>
		<div class="col-xs-2">
		  Date Discovered&nbsp;<i class="fa fa-sort"></i>
		</div>
		<div class="col-xs-2">
		</div>
	</div>

	<div class="test-container">
		<div class="empty__state vertical__center" ng-show="tests.length==0">
			<button class="btn--green btn-lg" ng-click="startMappingProcess()" ng-show="!isStarted">Start Discovery</button>
			<h3>Begin a Discovery by first adding a <a ui-sref="main.domains">Domain</a>.</h3>
		</div>
		<div class="test" ng-repeat="test in tests" ng-show="tests.length>0">
			<div class="test__profile vertical__center__int" >
			  <div class="col-xs-2 test__status text--shadow">
			   	<div class="row no-gutter">
					 	<div class="col-xs-6 btn--green select__neutral status vertical__center__int">
						 	<div class="" ng-click="updateCorrectness(test, true, $index)">
						   	<i class="fa fa-check status--symbol white"
							   	 style="{{test.correct ? 'color:green' : 'color:#bfbfbf'}}"></i>
						   	<br/>
						   	Correct
							</div>
						</div>
						<div class="status col-xs-6 btn--red select__neutral vertical__center__int">
							<div class="" ng-click="updateCorrectness(test, false, $index)">
								<i  class="fa fa-times status--symbol white"
									style="{{!test.correct && test.correct != null ? 'color:red' : 'color:#bfbfbf'}}"></i>
								<br/>
								Incorrect
							</div>
						</div>
				  </div>
			  </div>

			  <div class="col-xs-4 test__title" ng-click="toggleTestDataVisibility(test, test.path.path[0])">
					{{test.name || "Test # (Add funtionality)"}}
			  </div>
			  <div class="col-xs-2" ng-click="toggleTestDataVisibility(test, test.path.path[0])">
					{{test.runtime || "0ms"}}
			  </div>
			  <div class="col-xs-2" ng-click="toggleTestDataVisibility(test, test.path.path[0])">
					&nbsp;
			  </div>

			  <div class="col-xs-2 test__btns">
					<div class="btn-group" role="group" aria-label="Favorite More">
			 			<button class="btn btn--right btn--gray">
			   			<i class="fa fa-angle-down"></i>
				 		</button>
					</div>
			  </div>
			</div>

			<div ng-show="visibleTestKey==test.key && visible" >
			  <div class="test__path vertical__center__int">
					<div  ng-show="node.screenshot" class="path-node path-page">
						<img src="{{node.screenshot}}" class="path-node-image"
							 	 uib-tooltip="{{node.url}}"/>
				  </div>
					  <div ng-show="node.type == 'PageElement'" class="path-node path-element vertical__center">
						<i class="fa fa-font fa-2x" uib-tooltip="node.xpath" ng-show="node.attributes.text"></i>
						<i class="fa fa-paper-  plane-o fa-2x" uib-tooltip="node.xpath" ng-show="node.attributes.submit"></i>

							<i class="fa fa-square-o fa-2x fa-rotate-45" uib-tooltip="node.xpath" ></i>
					  </div>
					  <div ng-show="node.type == 'Action'" class="path-node path-action vertical__center">
						  <i class="fa fa-mouse-pointer fa-2x icon" uib-tooltip="node.name"></i>
					  </div>
					  <div class="path-bar">
					  </div>
					</div>
					<div class="path-node-container" ng-click="setCurrentNode(test.result)">
					  <div  ng-show="test.result.screenshot" class="path-node">
							<img src="{{test.result.screenshot}}" class="path-node-image"
								 uib-tooltip="{{test.result.url}}"/>
					  </div>
					</div>
						{{selectedTab.dataTab}}

			  </div>

			  <div class="test__groups">
					<div>
						<label>Groups: </label>
						{{selectedTab.dataTab}}

					</div>
					<div ng-repeat="group in test.groups" data-toggle="tooltip" data-placement="top" title="{{group.description}}">
					  {{group.name}}
						<span ng-click="removeGroup(test.key, group)">
							<i class="fa fa-times"></i>
						</span>
					</div>
					<div>
						<input ng-model="group.name" />
					</div>
					<div  ng-click="addGroup(test, group)">
						<i class="fa fa-plus"></i>
					</div>
			  </div>

			  <div class="test__info" ng-show="test.visible">
					<md-tabs md-selected="selectedTab.dataTab">
					  <md-tab label="Node Data" class="info__title h5" md-on-select="onTabChanges(0)">
							<div class="node__data">
								<div class="" ng-show="current_node.type=='Page'">
								  <div class="col-sm-4">
									<img src="{{current_node.screenshot}}" class="path-node-image" uib-tooltip="{{current_node.url}}" />
								  </div>
								  <div class="col-sm-8">
									  <div class="key--value row">
										  <div class="col-sm-1 data__key">
											 Landable:&nbsp;&nbsp;
										  </div>
										  <div class="col-sm-11 data__value">
											 {{current_node.landable}}
										  </div>
									  </div>
									  <div class="key--value row">
										  <div class="col-sm-1 data__key">
											  URL:&nbsp;&nbsp;
										  </div>
										  <div class="col-sm-11 data__value">
											  {{current_node.url}}
										  </div>
										</div>
									  <div class="key--value row">
										  <div class="col-sm-1 data__key">
											 Visible Element Counts:&nbsp;&nbsp;
										  </div>
										  <div class="col-sm-11 data__value">
												<div class="col-sm-12" ng-repeat="(key, value) in current_node.elementCounts">
										 			{{key}} - {{value}}
												</div>
										  </div>
										</div>
									  <div class="key--value row">
										  <div class="col-sm-1 data__key">
											 Total Weight:&nbsp;&nbsp;
										  </div>
										  <div class="col-sm-11 data__value">
											 {{current_node.totalWeight}}
										  </div>
									  </div>
								  </div>
								</div>
								<div class="" ng-show="current_node.type=='PageElement'">
								  <div class="pull-right col-sm-4" ng-show="current_node.screenshot" >
										<img src="{{current_node.screenshot}}" style="width: 100px; height:100px" uib-tooltip="{{current_node.url}}" />
								  </div>
								  <div class="col-sm-8">
									  <div class="row node__title">
										  <h4>Element</h4>
									  </div>
									 <div class="key--value row">
									  <div class="col-sm-1 data__key no-padding">
										 Tag type:&nbsp;&nbsp;
									  </div>
									  <div class="col-sm-11 data__value no-padding" style="text-transform:capitalize !important;">
										 {{current_node.name}}
									  </div>
									 </div>
									 <div class="key--value row">
									  <div class="col-sm-1 data__key no-padding">
										 Xpath:&nbsp;&nbsp;
									  </div>
									  <div class="col-sm-11 data__value no-padding">
										 {{current_node.xpath}}
									  </div>
									 </div>
									 <div class="key--value row">
									  <div class="col-sm-1 data__key">
										 CSS:&nbsp;&nbsp;
									  </div>
									 	<div class="col-sm-11 data__value" ng-repeat="(key, value) in current_node.cssProperties">
											{{key}} -           {{value}}
								  	</div>
									 </div>
									 <div class="key--value row">
									  <div class="col-sm-1 data__key">
										 Attributes:&nbsp;&nbsp;
									  </div>

									  <div class="col-sm-11 data__value" ng-repeat="(key, value) in current_node.attributes">
											{{key}} -           {{value}}
									  </div>
									 </div>
									 <div class="key--value row">
									  <div class="col-sm-1 data__key">
										 Text:&nbsp;&nbsp;
									  </div>

									  <div class="col-sm-11 data__value">
										 {{current_node.text}}
									  </div>
									 </div>
								</div>
							</div>
							<div class="" ng-show="current_node.type=='Action'">
									<div class="row node__title">
										<h4>Action</h4>
									</div>
									<div class="key--value row">
									  <div class="col-sm-1 data__key">
										 Name:&nbsp;&nbsp;
									  </div>
									  <div class="col-sm-11 data__value">
										 {{current_node.name}}
									  </div>
									</div>
									<div class="key--value row">
									  <div class="col-sm-1 data__key">
										Value:&nbsp;&nbsp;
									  </div>
									  <div class="col-sm-11 data__value">
										 {{current_node.val}}
									  </div>
									</div>
							</div>
						  </div>
					  </md-tab>
					  <md-tab label="History" class="info__title h5" md-on-select="onTabChanges(1)">
							<div class="test__history">
							Put test run history here
						  </div>
					  </md-tab>
					</md-tabs>
			  </div>
			  <!-- Node Examination -->
			  <!-- Node Examination -->
		</div>
	  </div>
	</div>
</div>
