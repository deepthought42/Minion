<div class="container" ng-view></div>

<form ng-submit="getTestByName(tester.name)"
      enctype="multipart/form-data"
      novalidate>
  <input type="text"
         ng-model="tester.name"
         placeholder="URL (eg. http://localhost:8080)" />

  <button type="submit">Find Test By Name</button>
</form>

<div class="pull-right">
  <select ng-options="group as group for group in groups" ng-model="selectedGroup">
  </select>
  <i class="fa fa-play-circle-o fa-2x" ng-click="runGroupTests('www.thecodelesscode.com',selectedGroup)"></i>
</div>

<div class="col-sm-12">
  <div class="col-sm-2">
    Status
  </div>
  <div class="col-sm-4">
    Test Title
  </div>
  <div class="col-sm-2">
    Time (seconds)
  </div>
  <div class="col-sm-2">
    Date Last run
    <i class="fa fa-arrow" />
  </div>
  <div class="col-sm-2">

  </div>
</div>
<div class="col-sm-12">
  <div class="col-sm-1">
    <input type="checkbox" />
  </div>
  <div class="col-sm-1">
    <span class="col-sm-12" ng-show="test.passing">
      <i class="fa fa-check"/>
    </span>
    <span class="col-sm-12" ng-show="!test.passing">
      <i class="fa fa-times"/>
    </span>
  </div>
  <div class="col-sm-4">
    Regression Test 1 {test.title}
  </div>
  <div class="col-sm-2">
    3.07
  </div>
  <div class="col-sm-2">
    3/10/17
  </div>
  <div class="col-sm-2">
    <button class="btn">Run</button>
    <button class="btn"><i class="fa fa-star-o" /></button>
    <button class="btn"><i class="fa fa-angle-down" /></button>
  </div>
</div>


<div ng-repeat="test in tests">
  <div class="col-sm-12">
    <div class="col-sm-1">
      <input type="checkbox" />
    </div>
    <div class="col-sm-1">
      <span class="col-sm-12" ng-show="test.passing">
        <i class="fa fa-check"/>
      </span>
      <span class="col-sm-12" ng-show="!test.passing">
        <i class="fa fa-times"/>
      </span>
    </div>
    <div class="col-sm-4">
      Regression Test 1 {test.title}
    </div>
    <div class="col-sm-2">
      3.07
    </div>
    <div class="col-sm-2">
      3/10/17
    </div>
    <div class="col-sm-2">
      <button class="btn">Run</button>
      <button class="btn"><i class="fa fa-star-o" /></button>
      <button class="btn"><i class="fa fa-angle-down" /></button>
    </div>
  </div>
  <div class="col-sm-12" style="background-color:white;">

    <div ng-repeat="node in test.path.path" class="col-sm-1" ng-click="setCurrentNode(node)">
      <i class="fa fa-arrow-right pull-left"></i>
      <img src="{{node.screenshot}}" style="width: 100px; height:100px"
           uib-tooltip="{{node.url}}"
           ng-show="node.screenshot"
           ng-click="current_node_image=node.screenshot"/>
      <div class="col-sm-11" ng-show="node.xpath">

        <div class="elementBubble">
          <i class="fa fa-list-alt fa-2x icon" uib-tooltip="node.xpath"></i>
        </div>
        <div class="actionBubble pull-right">
          <i class="fa fa-mouse-pointer icon" uib-tooltip="node.name"></i>
        </div>
      </div>
    </div>
    <div class="col-sm-12">
      <label>Groups: </label>
      <div ng-repeat="group in test.groups">{{group}}</div>
      <input ng-model="new_group" />
      <i class="fa fa-plus" ng-click="addGroup(new_group)"></i>
    </div>
    <div class="pull-right col-sm-3">
      <i class="fa fa-check fa-3x col-sm-4"
         style="{{pathWrapper.useful ? 'color:green' : 'color:#red'}}"></i>

      <i  class="fa fa-times fa-3x col-sm-4"
          style="{{!pathWrapper.correct ? 'color:red' : 'color:#bfbfbf'}}"
          ng-click="pathWrapper.correct=!pathWrapper.correct"></i>

      <i class="fa fa-check fa-3x col-sm-4"
         style="{{pathWrapper.correct ? 'color:green' : 'color:#bfbfbf'}}"
         ng-click="pathWrapper.correct=!pathWrapper.correct"></i>

      <i class="fa fa-angle-down fa-3x col-sm-4"></i>
    </div>
  </div>

  <!-- Node Examination -->
  <div class="col-sm-12" ng-show="current_node.type=='Page'">
    <div class="col-sm-4">
      <img src="{{current_node.screenshot}}" style="width: 100px; height:100px" uib-tooltip="{{current_node.url}}" />
    </div>
    <div class="col-sm-3">
      <div class="col-sm-12">
        <label>Landable:</label> <span>{{current_node.landable}}</span>
        <label>URL:</label> <span>{{current_node.url}}</span>
        <label>Total Visible Elements: </label> <span>{{current_node.element_counts}}</span>
        <label>Total Weight:</label> <span>{{current_node.total_weight}}</span>
        <label>Page Weight:</label> <span>{{current_node.page_weight}}</span>
      </div>
    </div>
  </div>
  {{current_node.type}}
  <div class="col-sm-12" ng-show="current_node=='PageElement'">
    <div class="pull-right col-sm-2" >
      <img src="{{current_node.screenshot}}" style="width: 100px; height:100px" uib-tooltip="{{current_node.url}}" />
    </div>
    <div>
      ELEMENT
      <div>
        {{current_node.name}}
      </div>
      <div>
        xpath : {{current_node.xpath}}
      </div>
      css :
      <div ng-repeat="(key, value) in current_node.cssProperties">
          {{key}} :           {{value}}
      </div>
      <div>
        attributes
        <div ng-repeat="(key, value) in current_node.attributes">
          {{key}} :           {{value}}
        </div>
      </div>
      <div>
        Internal Text : {{current_node.text}}
      </div>
    </div>
    <div class="col-sm-12" ng-show="current_node=='Action'">
      <div>
        Action
        <div>
          Name : {{current_node.name}}
        </div>
        <div>
          Value : {{current_node.val}}
        </div>
      </div>
    </div>
  </div>
</div>
