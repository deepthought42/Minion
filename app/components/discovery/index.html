<div controller="WorkManagementCtrl" class="content">
<!--  <button ng-show="isStarted"
          class="btn btn-danger col-xs-12"
          ng-click="stopMappingProcess('account_key_here')">
      Stop!
  </button>
-->

	<div class="secondary-nav no-gutter">
	  <div class="col-md-6 col-sm-0">
	  </div>
	  <div class="col-md-3 col-sm-6 search">
		<div class="input-group">
		  <input type="text" class="form-control pull-right" ng-model="search" placeholder="Search Tests" aria-describedby="basic-addon2">
		  <span class="input-group-addon" id="basic-addon2"><i class="fa fa-search"></i></span>
		</div>
	  </div>
	  <div class="col-md-1 col-sm-2">
			 <!-- /.dropdown -->
    			<div class="dropdown dropdown-toggle pull-right"  ng-options="group as group for group in groups" ng-model="selectedGroup" data-toggle="dropdown" href="#">
    				Filter
    				<i class="fa fa-caret-down"></i>
    			</div>
    			<ul class="dropdown-menu">
    				<li><a href="">
        <input type="checkbox" aria-label="Checkbox for following text input">&nbsp;
					 Failed</a>
    				</li>
    				<li><a href="">
        <input type="checkbox" aria-label="Checkbox for following text input">&nbsp;
					 Passed</a>
    				</li>
    			</ul>
    			<!-- /.dropdown -->	
	  </div>
	  <div class="col-md-2 col-sm-4 ">
		<button class="btn btn--green pull-right" ng-click="startMappingProcess()" ng-show="!isStarted">Start Discovery</button>
	  </div>
	</div>

	<div class="test-labels">
		<div class="col-xs-2">
		  Status
		</div>
		<div class="col-xs-4">
		  Test Title
		</div>
		<div class="col-xs-2">
		  Time (ms)&nbsp;<i class="fa fa-sort"></i>
		</div>
		<div class="col-xs-2">
		  Date Discovered&nbsp;<i class="fa fa-sort"></i>
		</div>
		<div class="col-xs-2">
		</div>
	</div>

	<div class="test-container">
		<div class="test" ng-repeat="test in tests">
			<div class="test__profile" ng-click="toggleTestDataVisibility(test.key, test.path.path[0])">
			  <div class="col-xs-2 test__status">
			   <div class="row no-gutter status">
				 <div class="col-xs-6" ng-click="updateCorrectness(test, true)">
				   <i class="fa fa-check status--symbol"
					   style="{{test.correct ? 'color:green' : 'color:#bfbfbf'}}"
					   ></i>
				   <br/>
				   Correct
				</div>
				<div class="col-xs-6 status" ng-click="updateCorrectness(test, false)">
					<i  class="fa fa-times status--symbol"
						style="{{!test.correct && test.correct != null ? 'color:red' : 'color:#bfbfbf'}}"></i>
					<br/>
					Incorrect
				</div>
				  </div>
			  </div>

			  <div class="col-xs-4 test__title">
				{{test.name || "Test # (Add funtionality)"}}
			  </div>
			  <div class="col-xs-2">
				{{test.runtime || "0ms"}}
			  </div>
			  <div class="col-xs-2">
				&nbsp;
			  </div>

			  <div class="col-xs-2 test__btns">
				<div class="btn-group" role="group" aria-label="Favorite More">
				 <button class="btn btn--right btn--gray">
				   <i class="fa fa-angle-down"></i>
				 </button>
				</div>
			  </div>
			</div>

			<div ng-show="visibleTestKey==test.key && visible" >
			  <div class="test__path">
				<div ng-repeat="node in test.path.path" class="path-node-container" ng-click="setCurrentNode(node)">
				  <div  ng-show="node.screenshot" class="path-node path-page">
					<img src="{{node.screenshot}}" class="path-node-image"
						 uib-tooltip="{{node.url}}"/>
				  </div>
				  <div class="path-bar display-none">
						  </div>
				  <div ng-show="node.type == 'PageElement'" class="path-node path-element">
					<i class="fa fa-font fa-2x" uib-tooltip="node.xpath" ng-show="node.attributes.text"></i>
					<i class="fa fa-paper-  plane-o fa-2x" uib-tooltip="node.xpath" ng-show="node.attributes.submit"></i>

					<i class="fa fa-square-o fa-2x fa-rotate-45" uib-tooltip="node.xpath" ></i>
				  </div>
				  <div ng-show="node.type == 'Action'" class="path-node path-action">
					  <i class="fa fa-mouse-pointer fa-2x icon" uib-tooltip="node.name"></i>
				  </div>
				  <div class="path-bar">
				  </div>
				</div>
				<div class="path-node-container" ng-click="setCurrentNode(test.result)">
				  <div  ng-show="test.result.screenshot" class="path-node">
					<img src="{{test.result.screenshot}}" class="path-node-image"
						 uib-tooltip="{{test.result.url}}"/>
				  </div>
				</div>
			  </div>

			  <div class="test__groups">
				<div><label>Groups: </label></div>
				<div ng-repeat="group in test.groups" data-toggle="tooltip" data-placement="top" title="{{group.description}}">
				  {{group.name}}
				</div>
				<div>
				<input ng-model="group.name" />
				</div>
				<div>
				<i class="fa fa-plus" ng-click="addGroup(test, group)"></i>
				</div>
			  </div>

			  <div class="test__info">
				<md-tabs>
				  <md-tab label="Node Data">
						<div class="node__data">
							<div class="" ng-show="current_node.type=='Page'">
							  <div class="col-sm-4">
								<img src="{{current_node.screenshot}}" class="path-node-image" uib-tooltip="{{current_node.url}}" />
							  </div>
							  <div class="col-sm-8">
								  <div class="key--value row">
								  <div class="col-sm-1 data__key">
									 Landable:&nbsp;&nbsp;
								  </div> 
								  <div class="col-sm-11 data__value">
									 {{current_node.landable}}
								  </div>
								 </div> 
								  <div class="key--value row">
								  <div class="col-sm-1 data__key">
									 URL:&nbsp;&nbsp;
								  </div> 
								  <div class="col-sm-11 data__value">
									 {{current_node.url}}
								  </div>
								 </div> 
								  <div class="key--value row">
								  <div class="col-sm-1 data__key">
									 Visible Element Counts:&nbsp;&nbsp;
								  </div> 
								  <div class="col-sm-11 data__value">
									 {{current_node.elementCounts || "coming soon"}}
								  </div>
								 </div> 
								  <div class="key--value row">
								  <div class="col-sm-1 data__key">
									 Total Weight:&nbsp;&nbsp;
								  </div> 
								  <div class="col-sm-11 data__value">
									 {{current_node.totalWeight}}
								  </div>
								 </div>
							  </div>
							</div>
							<div class="" ng-show="current_node.type=='PageElement'">
							  <div class="pull-right col-sm-4" ng-show="current_node.screenshot" >
								<img src="{{current_node.screenshot}}" style="width: 100px; height:100px" uib-tooltip="{{current_node.url}}" />
							  </div>
							  <div class="col-sm-8">
								  <div class="row">
									  <h4>Element</h4>
								  </div>
								 <div class="key--value row">
								  <div class="col-sm-1 data__key no-padding">
									 Tag type:&nbsp;&nbsp;
								  </div> 
								  <div class="col-sm-11 data__value no-padding" style="text-transform:capitalize !important;">
									 {{current_node.name}}
								  </div>
								 </div> 
								 <div class="key--value row">
								  <div class="col-sm-1 data__key no-padding">
									 Xpath:&nbsp;&nbsp;
								  </div> 
								  <div class="col-sm-11 data__value no-padding">
									 {{current_node.xpath}}
								  </div>
								 </div> 
								 <div class="key--value row">
								  <div class="col-sm-1 data__key">
									 CSS:&nbsp;&nbsp;
								  </div> 
								 <div class="col-sm-11 data__value" ng-repeat="(key, value) in .cssProperties">
										{{key}} -           {{value}}
								  </div>
								 </div> 
								 <div class="key--value row">
								  <div class="col-sm-1 data__key">
									 Attributes:&nbsp;&nbsp;
								  </div> 

								  <div class="col-sm-11 data__value" ng-repeat="(key, value) in current_node.attributes">
										{{key}} -           {{value}}
								  </div>
								 </div> 
								 <div class="key--value row">
								  <div class="col-sm-1 data__key">
									 Text:&nbsp;&nbsp;
								  </div> 

								  <div class="col-sm-11 data__value">
									 {{current_node.text}}
								  </div>
								 </div> 
							</div>
						</div>
						<div class="" ng-show="current_node.type=='Action'">
								<div><h4>Action</h4></div>
								<div class="key--value row">
								  <div class="col-sm-1 data__key">
									 Name:&nbsp;&nbsp;
								  </div> 
								  <div class="col-sm-11 data__value">
									 {{current_node.name}}
								  </div>
								</div> 
								<div class="key--value row">
								  <div class="col-sm-1 data__key">
									Value:&nbsp;&nbsp;
								  </div> 
								  <div class="col-sm-11 data__value">
									 {{current_node.val}}
								  </div>
								</div> 
						</div>
					  </div>
				  </md-tab>
				  <md-tab label="History">
						<div class="test__history">
						Put test run history here
					  </div>
				  </md-tab>
				</md-tabs>
			  </div>
			  <!-- Node Examination -->
			  <!-- Node Examination -->
		</div>
	  </div>
	</div>
</div>