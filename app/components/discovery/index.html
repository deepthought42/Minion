<div controller="WorkManagementCtrl" class="content">
<!--  <button ng-show="isStarted"
          class="btn btn-danger col-xs-12"
          ng-click="stopMappingProcess('account_key_here')">
      Stop!
  </button>
-->

  <div class="no-gutter row secondary-nav" >
    <div class="col-xs-2">
      <div class="input-group">
        <span class="input-group-btn">
          <button class="btn btn--green" ng-click="startMappingProcess()" ng-show="!isStarted">Start Test Discovery</button>
        </span>
      </div>
    </div>
    <div class="col-xs-5">
    </div>
    <div class="col-xs-2">
      <div class="input-group">
        <span class="input-group-btn">
          <button class="btn btn--green" ng-click="createTestSuite()" >Create Test Suite<br/>(add functionality)</button>
        </span>
      </div>
    </div>
    <div class="col-xs-2 search">
      <span class="fa fa-search"></span>
      <input ng-model="search" placeholder="Search" />
    </div>
    <div class="col-sm-1">
      <select ng-options="group as group for group in groups"
              ng-model="selectedGroup">
              <option value="" disabled selected>Filter</option>
      </select>
      <i class="fa fa-play-circle-o" ng-click="runGroupTests('www.thecodelesscode.com',selectedGroup)"></i>
    </div>
  </div>

  <div class="row no-gutter test-labels">
    <div class="col-xs-2">
      Status
    </div>
    <div class="col-xs-4">
      Test Title
    </div>
    <div class="col-xs-2">
      Time (seconds)&nbsp;<i class="fa fa-sort"></i>
    </div>
    <div class="col-xs-2">
      Date Last Run&nbsp;<i class="fa fa-sort"></i>
    </div>
    <div class="col-xs-2">

    </div>
  </div>

  <div class="test-container">
    <div class="test" ng-repeat="test in tests">

    <div class="test__profile" ng-click="toggleTestDataVisibility(test.key, test.path.path[0])">
      <div class="col-xs-2 test__status">
       <div class="row no-gutter">
         <div class="col-xs-6" ng-click="updateCorrectness(test, true)">
           <i class="fa fa-check"
               style="{{test.correct ? 'color:green' : 'color:#bfbfbf'}}"
               ></i>
           <br/>
           Correct
        </div>
        <div class="col-xs-6" ng-click="updateCorrectness(test, false)">
            <i  class="fa fa-times"
                style="{{!test.correct && test.correct != null ? 'color:red' : 'color:#bfbfbf'}}"></i>
            <br/>
            Incorrect
        </div>
    	  </div>
      </div>

      <div class="col-xs-4 test__title">
        {{test.name || "Test # (Add funtionality)"}}
      </div>
      <div class="col-xs-2">
        {{test.runtime || "0ms"}}
      </div>
      <div class="col-xs-2">
        &nbsp;
      </div>

      <div class="col-xs-2 test__btns">
        <div class="btn-group" role="group" aria-label="Favorite More">
         <button class="btn btn--right btn--gray">
           <i class="fa fa-angle-down"></i>
         </button>
        </div>
    	</div>
    </div>
    
    
    
    
    
    <div ng-show="visibleTestKey==test.key && visible" >
      <div class="test__path">
        <div ng-repeat="node in test.path.path" class="path-node-container" ng-click="setCurrentNode(node)">
          <div  ng-show="node.screenshot" class="path-node path-page">
            <img src="{{node.screenshot}}" class="path-node-image"
                 uib-tooltip="{{node.url}}"/>
          </div>
          <div class="path-bar display-none">
				  </div>
          <div ng-show="node.type == 'PageElement'" class="path-node path-element">
            <i class="fa fa-font fa-2x" uib-tooltip="node.xpath" ng-show="node.attributes.text"></i>
            <i class="fa fa-paper-  plane-o fa-2x" uib-tooltip="node.xpath" ng-show="node.attributes.submit"></i>

            <i class="fa fa-square-o fa-2x fa-rotate-45" uib-tooltip="node.xpath" ></i>
          </div>
          <div ng-show="node.type == 'Action'" class="path-node path-action">
              <i class="fa fa-mouse-pointer fa-2x icon" uib-tooltip="node.name"></i>
          </div>
          <div class="path-bar">
				  </div>
				  
        </div>
        <div class="path-node-container" ng-click="setCurrentNode(test.result)">
          <div  ng-show="test.result.screenshot" class="path-node">
            <img src="{{test.result.screenshot}}" class="path-node-image"
                 uib-tooltip="{{test.result.url}}"/>
          </div>
        </div>
      </div>
      
      <div class="test__groups">
        <div><label>Groups: </label></div>
        <div ng-repeat="group in test.groups" data-toggle="tooltip" data-placement="top" title="{{group.description}}">
          {{group.name}}
        </div>
        <div>
        <input ng-model="group.name" />
        </div>
        <div>
        <i class="fa fa-plus" ng-click="addGroup(test, group)"></i>
        </div>
      </div>

      <div class="test__info">
        <md-tabs>
          <md-tab label="Node Data">
           	<div class="node__data">
				<div class="col-sm-12 no-padding" ng-show="current_node.type=='Page'">
				  <div class="col-sm-4" >
					<img src="{{current_node.screenshot}}" class="path-node-image"  uib-tooltip="{{current_node.url}}" />
				  </div>
				  <div class="col-sm-8">
					<div class="col-sm-12">
					  <div>
						<label>Landable -</label>
						<span>{{current_node.landable}}</span>
					  </div>
					  <div>
						<label>URL -</label>
						<span>{{current_node.url}}</span>
					  </div>
					  <div>
						<label>Visible Element counts- </label>
						<span>{{current_node.elementCounts || "coming soon"}}</span>
					  </div>
					  <div>
						<label>Total Weight -</label>
						<span>{{current_node.totalWeight}}</span>
					  </div>
					</div>
				  </div>
				</div>
				<div class="col-sm-12 no-padding" ng-show="current_node.type=='PageElement'">
				  <div class="pull-right col-sm-2" ng-show="current_node.screenshot" >
					<img src="{{current_node.screenshot}}" style="width: 100px; height:100px" uib-tooltip="{{current_node.url}}" />
				  </div>
				  <div>
					ELEMENT
					<div>
					 tag type -  {{current_node.name}}
					</div>
					<div>
					  xpath - {{current_node.xpath}}
					</div>
					CSS
					<div ng-repeat="(key, value) in current_node.cssProperties">
						{{key}} -           {{value}}
					</div>
					<div>
					  attributes
					  <div ng-repeat="(key, value) in current_node.attributes">
						{{key}} -           {{value}}
					  </div>
					</div>
					<div>
					  Internal Text - {{current_node.text}}
					</div>
				  </div>
				</div>
				<div class="col-sm-12 no-padding" ng-show="current_node.type=='Action'">
				  Action
				  <div>
					Name : {{current_node.name}}
				  </div>
				  <div>
					Value : {{current_node.val}}
				  </div>
				</div>
			  </div>
          </md-tab>
          <md-tab label="History">
				<div class="test__history">
				Put test run history here
			  </div>
          </md-tab>
        </md-tabs>
      </div>
      <!-- Node Examination -->
      <!-- Node Examination -->



		</div>
	  </div>
	</div>
</div>