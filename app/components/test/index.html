<div class="container" ng-view></div>

<div class="row no-gutter">
  <div class="col-xs-2">
    <button>
      Create Test Suite
    </button>
  </div>
  <div class="col-xs-7">
  </div>
  <div class="col-xs-2 search">
    <span class="fa fa-search"></span>
    <input ng-model="search" placeholder="Search" />
  </div>
  <div class="col-sm-1">
    <select ng-options="group as group for group in groups"
            ng-model="selectedGroup">
            <option value="" disabled selected>Filter</option>
    </select>
    <i class="fa fa-play-circle-o" ng-click="runGroupTests('www.thecodelesscode.com',selectedGroup)"></i>
  </div>
</div>

<div class="test row no-gutter test__labels">
  <div class="col-sm-2">
    Status
  </div>
  <div class="col-sm-4">
    Test Title
  </div>
  <div class="col-sm-2">
    Time (seconds)
    <i class="fa fa-sort"></i>
  </div>
  <div class="col-sm-2">
    Date Last run
    <i class="fa fa-sort"></i>
  </div>
  <div class="col-sm-2">

  </div>
</div>

  <div class="test__container" ng-repeat="test in tests">

    <div class="row test" ng-click="showTestData(test.key)">
      <div class="col-xs-2 test__status">
        <span class="col-xs-12" ng-show="pathWrapper.passing">
          <i class="fa fa-check"
             style="color:green"></i>
          <br/>
           Passing
        </span>
        <span class="col-xs-12" ng-show="!pathWrapper.passing && pathWrapper.passing != null">
          <i  class="fa fa-times"
              style="color:red"></i>
          <br/>
          Failing
        </span>


        <span class="col-xs-12" ng-show="!pathWrapper.passing">
          <i  class="fa fa-question"
              style="color:orange"></i>
          <br/>
          Unknown
        </span>
      </div>

      <div class="col-xs-4 test__title">
        {{test.name || "Test #"}}
      </div>
      <div class="col-xs-2">
        {{test.runtime || "0 ms"}}
      </div>
      <div class="col-xs-2">
        &nbsp;
      </div>

      <div class="col-xs-2 test__btns">
        <div class="btn-group" role="group" aria-label="Run Favorite More">
         <button class="btn btn--left btn--gray">Run</button>
         <button class="btn btn--right btn--gray"><i class="fa fa-angle-down"></i>
         </button>
        </div>
      </div>
    </div>
    <div class="row no-gutter" ng-show="visibleTestKey==test.key" style="background-color:white;">
      <div class="row no-gutter" >
        <div ng-repeat="node in test.path.path" class="col-sm-1" ng-click="setCurrentNode(node)">
          <i class="fa fa-arrow-right pull-left"></i>
          <img src="{{node.screenshot}}" style="width: 100px; height:100px"
               uib-tooltip="{{node.url}}"
               ng-show="node.screenshot"
               ng-click="current_node_image=node.screenshot"/>
          <div class="col-sm-11" ng-show="node.type == 'PageElement'">
            <div class="elementBubble">
              <i class="fa fa-list-alt fa-2x icon" uib-tooltip="node.xpath"></i>
            </div>
          </div>
          <div  class="col-sm-11" ng-show="node.type == 'Action'">
            <div class="actionBubble pull-right">
              <i class="fa fa-mouse-pointer icon" uib-tooltip="node.name"></i>
            </div>
          </div>
        </div>
        <div class="row no-gutter">
          <label>Groups: </label>
          <div ng-repeat="group in test.groups" data-toggle="tooltip" data-placement="top" title="{{group.description}}">
            {{group.name}}
          </div>
          <input ng-model="group.name" />
          <i class="fa fa-plus" ng-click="addGroup(test, group)"></i>
        </div>
      </div>
      <div class="row no-gutter">
        <span>
          Element CSS
        </span>
        <span>
          Play Test
        </span>
        <span>
          History
        </span>
      </div>
      <!-- Node Examination -->
      <div class="col-sm-12" ng-show="current_node.type=='Page'">
        <div class="col-sm-4">
          <img src="{{current_node.screenshot}}" style="width: 100px; height:100px" uib-tooltip="{{current_node.url}}" />
        </div>
        <div class="col-sm-3">
          <div class="col-sm-12">
            <label>Landable:</label> <span>{{current_node.landable}}</span>
            <label>URL:</label> <span>{{current_node.url}}</span>
            <label>Total Visible Elements: </label> <span>{{current_node.element_counts}}</span>
            <label>Total Weight:</label> <span>{{current_node.total_weight}}</span>
            <label>Page Weight:</label> <span>{{current_node.page_weight}}</span>
          </div>
        </div>
      </div>

      <div class="col-sm-12" ng-show="current_node.type=='PageElement'">
        <div class="pull-right col-sm-2" >
          <img src="{{current_node.screenshot}}" style="width: 100px; height:100px" uib-tooltip="{{current_node.url}}" />
        </div>
        <div>
          ELEMENT
          <div>
            {{current_node.name}}
          </div>
          <div>
            xpath : {{current_node.xpath}}
          </div>
          css :
          <div ng-repeat="(key, value) in current_node.cssProperties">
              {{key}} :           {{value}}
          </div>
          <div>
            attributes
            <div ng-repeat="(key, value) in current_node.attributes">
              {{key}} :           {{value}}
            </div>
          </div>
          <div>
            Internal Text : {{current_node.text}}
          </div>
        </div>
        <div class="row no-gutter" ng-show="current_node=='Action'">
          <div>
            Action
            <div>
              Name : {{current_node.name}}
            </div>
            <div>
              Value : {{current_node.val}}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
