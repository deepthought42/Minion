<div class="content">
	<div class="secondary-nav vertical__center__int">
		<div class="col-md-2 col-sm-4">
  		<button class="btn btn--green pull-left" ng-click="runTests()">
  		  Run Tests
  		</button>
	  </div>

	  <div class="col-md-5 col-sm-0">
	  </div>

	  <div class="col-md-3 col-sm-6 search">
			<div class="input-group">
			  <input type="text" class="form-control pull-right" ng-model="searchText" placeholder="Search Tests" aria-describedby="basic-addon1">
			  <span class="input-group-addon btn--gray" id="basic-addon1"><i class="fa fa-search"></i></span>
			</div>
	  </div>

	  <div class="col-md-2 col-sm-2">
		 	<!-- /.dropdown -->
			<div class="dropdown dropdown-toggle pull-right"  ng-show="auth.isAuthenticated" data-toggle="dropdown" href="#">
				Filter
			</div>
			<ul class="dropdown-menu">
				<li>
					<a href="">
						<input type="checkbox" aria-label="Checkbox for following text input">&nbsp;
				 		Failed
					</a>
				</li>
				<li>
					<a href="">
						<input type="checkbox" aria-label="Checkbox for following text input">&nbsp;
				 		Passed
					</a>
				</li>
			</ul>
			<!-- /.dropdown -->
	  </div>
	</div>

	<div class="test-labels">
	  <div class="col-sm-1">
		    Status
	  </div>
	  <div class="col-sm-4 test__title">
			Test Title
	  </div>
	  <div class="col-sm-2">
		    Time (s)&nbsp;<i class="fa fa-sort"></i>
	  </div>
	  <div class="col-sm-4">
		    Date Last Run&nbsp;<i class="fa fa-sort"></i>
	  </div>
	  <div class="col-sm-1">
	  </div>
	</div>

	<div class="test-container">
		<div class="empty__state vertical__center" ng-show="waitingOnTests">
			<div style="text-align:center; margin: 0px auto;">
				<i class="fa fa-hourglass-half fa-spin fa-3x green fa-fw"
						aria-hidden="true"></i>
				<span class="sr-only">Running...</span>
			</div>
		</div>
		<div class="empty__state vertical__center" ng-show="!waitingOnTests && tests.length==0">
			<h3>
        Start a &#34;<a href="#/discovery">Discovery</a>&#34; to let Qanairy map your tests.
      </h3>
		</div>

		<div class="test"
				 ng-repeat="test in (filteredTests = tests) | filter:searchText"
				 ng-show="!waitingOnTests && tests.length > 0">
			<div class="test__profile vertical__center__int">
        <div class="col-xs-1 test__status" ng-show="test.running">
          <i class="fa fa-hourglass-half fa-spin fa-3x green fa-fw" aria-hidden="true"></i>
          <span class="sr-only">Running...</span>
        </div>
        <div class="col-xs-1 test__status" ng-show="!test.running">
					<span ng-show="test.correct">
					  <i class="fa fa-check-circle green status--symbol" ng-click="updateTestCorrectness(test, false)"></i>
					</span>
					<span ng-show="!test.correct && test.correct != null">
					  <i  class="fa fa-times-circle red status--symbol" ng-click="updateTestCorrectness(test, true)"></i>
					</span>
			  </div>
			  <div class="col-xs-4 test__title" ng-click="toggleTestDataVisibility(test);visible_tab='nodedata'+$index">
					<div class="row">
						<div class="col-xs-12" ng-show="!test.show_test_name_edit_field">
							<h2 ng-click="test.show_test_name_edit_field = true" >{{test.name || "Test #"}}</h2>
							<i class="fa fa-pencil edithover"  ng-click="test.show_test_name_edit_field = true" ></i>
						</div>
						<div class="vertical__center__int no-gutter" ng-show="test.show_test_name_edit_field">
								<div class="col-md-6 col-sm-8 ">
									<div class="input-group ">
										<input class="form-control title__edit" type="text" ng-model="new_name" ng-value="test.name" />
									</div>
								</div>
								<div class="col-md-6 col-sm-4 ">
									<div class="title__edit__buttons btn--gray" ng-click="cancelTestName(test, new_name)" ng-show="!test.show_waiting_icon">Cancel</div><div class="title__edit__buttons btn--green" ng-click="setTestName(test, new_name)" ng-show="!test.show_waiting_icon">Save</div>
									<div class=""><i class="fa fa-hourglass-half fa-spin fa-2x green fa-fw" ng-show="test.show_waiting_icon" aria-hidden="true"></i>
									</div>
								</div>
						</div>
					</div>
			  </div>



			  <div class="col-xs-2" ng-click="toggleTestDataVisibility(test);visible_tab='nodedata'+$index">
					{{test.runTime/1000}} s
			  </div>
			  <div class="col-xs-4" ng-click="toggleTestDataVisibility(test);visible_tab='nodedata'+$index">
					{{ getDate(test) || "Unknown / Not since discovery"}}
			  </div>
			  <div class="col-xs-1 test__btns">
					<div class="btn-group" role="group" aria-label="Run Favorite More">
					 <button class="btn btn--gray" ng-click="runTest(test, $index)">
						 Run
					 </button>
					</div>
			  </div>
			</div>


			<div ng-show="test.visible">
			  <div class="test__path vertical__center__int" ng-click="visible_tab='nodedata'+$index">
				  <div ng-repeat="node in test.path.path" class="path-node-container" ng-click="setCurrentNode(node)" tooltip-placement="top" uib-tooltip="{{node.url}}">
				    <div ng-show="node.screenshot" class="path-node path-page">
						  <img src="{{node.screenshot}}" class="path-node-image"/>
					  </div>
					 	<div ng-show="node.type == 'PageElement'" class="path-node path-element vertical__center" tooltip-placement="top" uib-tooltip="node.xpath">
						 	<span class="" >
                {{node.name}}
              </span>
			  		</div>
					  <div ng-show="node.type == 'Action'" class="path-node path-action vertical__center" tooltip-placement="top" uib-tooltip="node.name">
							<span ng-show="node.name=='click'">
						  	<i class="fa fa-mouse-pointer fa-2x icon" ></i>
							</span>
							<span ng-show="node.name=='doubleClick'">
								<i class="fa fa-mouse-pointer fa-2x icon"></i>
								<div class=”doubleclick” >x2</div>
							</span>
							<span ng-show="node.name=='mouseover'">
								<i class="fa fa-hand-pointer-o fa-2x icon"></i>
							</span>
							<span ng-show="node.name=='scroll'">
								<i class="fa fa-arrows-v fa-2x icon"></i>
							</span>
							<span ng-show="node.name=='sendKeys'">
								<i class="fa fa-i-cursor fa-2x icon"></i>
							</span>
					  </div>
					  <div class="path-bar">
					  </div>
					</div>
					<div class="path-node-container" ng-click="setCurrentNode(test.result)">
					  <div  ng-show="test.result.screenshot" class="path-node">
						  <img src="{{test.result.screenshot}}"
                   class="path-node-image"
									 tooltip-placement="top"
							 		 uib-tooltip="{{test.result.url}}"/>
					  </div>
					</div>
				</div>
				<div class="test__groups vertical__center__int no-gutter">

						<div class="col-md-1 col-sm-1 ">
							<h4>Groups: </h4>
						</div>
						<div class="col-md-3 col-sm-5 ">
							<div class="input-group">
								<input type="text" class="form-control pull-right" ng-model="group.name" placeholder="Feature, Smoke, etc." aria-describedby="basic-addon2">
								<span class="input-group-addon btn--gray" ng-click="addGroup(test, group)" id="basic-addon2"><i class="fa fa-plus"></i></span>
							</div>
						</div>
						<div class="col-md-8 col-sm-6 ">
							<div class="group__tag"
									 ng-repeat="group in test.groups"
	                 data-toggle="tooltip"
	                 data-placement="top"
	                 title="{{group.description}}">
							  {{group.name}}
								<span ng-click="removeGroup(test, group, $index)">
									<i class="remove__group fa fa-times"></i>
								</span>
							</div>
						</div>
			  </div>

			  <div class="test__info">
					<ul class="nav nav-tabs" id="myTab" role="tablist">
						<li class="nav-item" ng-click="visible_tab='nodedata'+$index">
							<a class="nav-link active" ng-class="{active: visible_tab=='nodedata'+$index}" id="node-data-tab" data-toggle="tab" role="tab" aria-controls="nodedata" aria-expanded="true" >Node Data</a>
						</li>
						<li class="nav-item" ng-click="visible_tab='history'+$index" >
							<a class="nav-link" ng-class="{active: visible_tab=='history'+$index}" id="history-tab" data-toggle="tab" role="tab" aria-controls="{{'history'+$index}}" >History</a>
						</li>
					</ul>
					<div class="tab-content">
						<div class="tab-pane node__data" id="{{'nodedata'+$index}}"
						 		 aria-labelledby="node-data-tab"
								 ng-class="{active: visible_tab=='nodedata'+$index}">
							<div class="">
								<div class="col-sm-12" ng-show="current_node.type=='Page'">
									<div class="row">
									  <div class="col-sm-12 col-xs-12 node__title">
											<h4>Page - {{current_node.url}}</h4>
										</div>
										<div class="col-sm-3 col-xs-2">
											<img type="button" class="path-node-image"
											data-toggle="modal" data-target="#exampleModal"
											src="{{current_node.screenshot}}" class="path-node-image" />
										</div>
										<div class="col-sm-9 col-xs-10">
											<div class="key--value row">
												<div class="col-xs-3 data__key">
												 Landable:&nbsp;&nbsp;
												</div>
												<div class="col-xs-9 data__value">
												 {{current_node.landable}}
												</div>
											</div>
											<div class="key--value row">
												<div class="col-xs-3 data__key">
													URL:
												</div>
												<div class="col-xs-9 data__value">
													{{current_node.url}}
												</div>
											</div>
										</div>
									</div>
								</div>
								<div class="col-sm-12" ng-show="current_node.type=='PageElement'">
									<div class="pull-right col-sm-4" ng-show="current_node.screenshot" >
										<img src="{{current_node.screenshot}}" style="width: 100px; height:100px" tooltip-placement="top" uib-tooltip="{{current_node.url}}" />
									</div>
									<div class="col-sm-8">
										<div class="row node__title">
											<h4>Element</h4>
										</div>
									 	<div class="key--value row">
											<div class="col-sm-3 data__key no-padding">
											  Tag type:&nbsp;&nbsp;
											</div>
											<div class="col-sm-9 data__value no-padding" style="text-transform:capitalize !important;">
											  {{current_node.name}}
											</div>
									 	</div>
										<div class="key--value row">
											<div class="col-sm-3 data__key no-padding">
											  Xpath:&nbsp;&nbsp;
											</div>
											<div class="col-sm-9 data__value no-padding">
											  {{current_node.xpath}}
											</div>
									  </div>
									 	<div class="key--value row">
											<div class="col-sm-3 data__key">
										  	CSS:&nbsp;&nbsp;
											</div>
											<div class="col-sm-9 data__value" ng-repeat="(key, value) in current_node.cssValues">
												{{key}} -           {{value}}
											</div>
									 	</div>
									 	<div class="key--value row">
											<div class="col-sm-3 data__key">
										 		Attributes:&nbsp;&nbsp;
											</div>

											<div class="col-sm-9 data__value" ng-repeat="attribute in current_node.attributes">
												{{attribute.name}} -           {{attribute.vals}}
											</div>
									 	</div>
									 	<div class="key--value row">
											<div class="col-sm-3 data__key">
										 		Text:&nbsp;&nbsp;
											</div>

											<div class="col-sm-9 data__value">
										 		{{current_node.text}}
											</div>
									 	</div>
									</div>
								</div>
								<div class="col-sm-12" ng-show="current_node.type=='Action'">
										<div class="row node__title">
											<h4>Action</h4>
										</div>
										<div class="key--value row">
											<div class="col-sm-3 data__key">
											 Name:&nbsp;&nbsp;
											</div>
											<div class="col-sm-9 data__value">
											 {{current_node.name}}
											</div>
										</div>
										<div class="key--value row" ng-show="current_node.value || current_node.name=='sendKeys'">
											<div class="col-sm-3 data__key">
												Value:&nbsp;&nbsp;
											</div>
											<div class="col-sm-9 data__value">
												{{current_node.val}}
											</div>
										</div>
								</div>
							</div>
						</div>
						<div class="tab-pane" id="{{'history'+$index}}" aria-labelledby="history-tab"  ng-class="{active: visible_tab=='history'+$index}">
							<div class="test__history" ng-repeat="record in test.records">
								Passes : {{record.passes}}
								<br />
								Ran at : {{record.ranAt}}
								<br />
								Total duration : {{record.runTime}}
							</div>
						</div>
					</div>
    		</div>
			</div>
	  </div>
	</div>
</div>
