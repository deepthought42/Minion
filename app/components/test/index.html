<div class="container" ng-view></div>

<div class="row no-gutter">


<div class="col-sm-4">
  <select ng-options="group as group for group in groups" ng-model="selectedGroup">
  </select>
  <i class="fa fa-play-circle-o fa-2x" ng-click="runGroupTests('www.thecodelesscode.com',selectedGroup)"></i>
</div>
</div>

<div class="row no-gutter test__labels">
  <div class="col-sm-2">
    Status
  </div>
  <div class="col-sm-4">
    Test Title
  </div>
  <div class="col-sm-2">
    Time (seconds)
    <i class="fa fa-sort"></i>
  </div>
  <div class="col-sm-2">
    Date Last run
    <i class="fa fa-sort"></i>
  </div>
  <div class="col-sm-2">

  </div>
</div>

<div class="test__container">
<div class="row test">
  <div class="col-sm-2 test__status">
    <span ng-show="test.passing">
      <i class="fa fa-check"></i>
    </span>
    <span ng-show="!test.passing">
      <i class="fa fa-times"></i>
    </span>
  </div>
  <div class="col-sm-4 test__title">
    Regression Test 1 {test.title}
  </div>
  <div class="col-sm-2">
    3.07
  </div>
  <div class="col-sm-2">
    3/10/17
  </div>
  <div class="col-xs-2 test__btns">
    <div class="btn-group" role="group" aria-label="Run Favorite More">
     <button class="btn btn--left btn--gray">Run</button>
     <button class="btn btn--right btn--gray">
       <i class="fa fa-angle-down"></i>
     </button>
    </div>
  	</div>
  </div>

  <div ng-repeat="test in tests">
    <div class="row no-gutter">

      <div class="col-sm-2 test__status">
        <span class="col-sm-12" ng-show="test.passing">
          <i class="fa fa-check"></i>
        </span>
        <span class="col-sm-12" ng-show="!test.passing">
          <i class="fa fa-times"></i>
        </span>
      </div>
      <div class="col-sm-4">
        {{test.name || "Test #"}}
      </div>
      <div class="col-sm-2">
        3.07
      </div>
      <div class="col-sm-2">
        3/10/17
      </div>
      <div class="col-xs-2 test__btns">
        <div class="btn-group" role="group" aria-label="Run Favorite More">
         <button class="btn btn--left btn--gray">Run</button>
         <button class="btn btn--right btn--gray">
           <i class="fa fa-angle-down"></i>
         </button>
        </div>
    	</div>
    </div>
    <div class="row no-gutter" style="background-color:white;">

      <div ng-repeat="node in test.path.path" class="col-sm-2" ng-click="setCurrentNode(node)">
        <div class="col-sm-11" ng-show="node.type == 'Page'">
          <md-tooltip md-direction="top">{{node.url}}</md-tooltip>
          <img src="{{node.screenshot}}" style="width: 100px; height:100px"
               ng-show="node.screenshot"
               ng-click="current_node_image=node.screenshot"/>
        </div>
        <div class="col-sm-11" ng-show="node.type == 'PageElement'">
          <div>
            <i class="fa fa-arrow-right pull-left"></i>
          </div>
          <div class="elementBubble pull-right">
            <md-tooltip md-direction="top">{{node.name}}</md-tooltip>
            <img style="width: 100px; height:100px"
                 ng-show="node.screenshot"
                 ng-click="current_node_image=node.screenshot"/>
            <i class="fa fa-list-alt fa-2x icon"></i>
          </div>
        </div>
        <div  class="col-sm-11" ng-show="node.type == 'Action'">
          <div>
            <i class="fa fa-arrow-right pull-left"></i>
          </div>

          <div class="actionBubble pull-right col-sm-9">
            <md-tooltip md-direction="top">{{node.name}}</md-tooltip>

            <i class="fa fa-mouse-pointer icon"></i>
          </div>
        </div>
      </div>
      <div class="col-sm-6">
        <div class="col-sm-12">
          <label>Groups: </label>

          <input ng-model="group.name" />
          <i class="fa fa-plus" ng-click="addGroup(test, group)"></i>
        </div>
        <div class="col-sm-12">
          <span ng-repeat="group in test.groups">
            <md-tooltip md-direction="bottom">
              {{group.description || "click to set"}}
            </md-tooltip>

            {{group.name}}
          </span>
        </div>
      </div>
      <div class="pull-right col-sm-3">
        <i class="fa fa-check fa-3x col-sm-4"
           style="{{pathWrapper.useful ? 'color:green' : 'color:#red'}}"></i>

        <i  class="fa fa-times fa-3x col-sm-4"
            style="{{!pathWrapper.correct ? 'color:red' : 'color:#bfbfbf'}}"
            ng-click="pathWrapper.correct=!pathWrapper.correct"></i>

        <i class="fa fa-check fa-3x col-sm-4"
           style="{{pathWrapper.correct ? 'color:green' : 'color:#bfbfbf'}}"
           ng-click="pathWrapper.correct=!pathWrapper.correct"></i>

        <i class="fa fa-angle-down fa-3x col-sm-4"></i>
      </div>
    </div>

    <!-- Node Examination -->
    <div class="row no-gutter" ng-show="current_node.type=='Page'">
      <div class="col-sm-4">
        <md-tooltip md-direction="top">{{current_node.url}}</md-tooltip>
        <img src="{{current_node.screenshot}}" style="width: 100px; height:100px"/>
      </div>
      <div class="col-sm-3">
        <div class="col-sm-12">
          <label>Landable:</label>
          <span>{{current_node.landable}}</span>
          <label>URL:</label>
          <span>{{current_node.url}}</span>
          <label>Total Visible Elements: </label>
          <span>{{current_node.element_counts}}</span>
          <label>Total Weight:</label>
          <span>{{current_node.total_weight}}</span>
          <label>Page Weight:</label>
          <span>{{current_node.page_weight}}</span>
        </div>
      </div>
    </div>

    {{current_node.type}}

    <div class="row no-gutter" ng-show="current_node=='PageElement'">
      <div class="pull-right col-sm-2" >
        <md-tooltip md-direction="top">
          {{current_node.url}}
        </md-tooltip>

        <img src="{{current_node.screenshot}}" style="width: 100px; height:100px" />
      </div>
      <div>
        ELEMENT
        <div>
          {{current_node.name}}
        </div>
        <div>
          xpath : {{current_node.xpath}}
        </div>
        css :
        <div ng-repeat="(key, value) in current_node.cssProperties">
            {{key}} :           {{value}}
        </div>
        <div>
          attributes
          <div ng-repeat="(key, value) in current_node.attributes">
            {{key}} :           {{value}}
          </div>
        </div>
        <div>
          Internal Text : {{current_node.text}}
        </div>
      </div>
      <div class="row no-gutter" ng-show="current_node=='Action'">
        <div>
          Action
          <div>
            Name : {{current_node.name}}
          </div>
          <div>
            Value : {{current_node.val}}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
